!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./",n(n.s=9)}([function(e,t){e.exports=require("jquery")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("electron")},function(e,t,n){const i=n(0);e.exports={open(e,t){var n=i("#J_singleton_toast"),r="string"==typeof t?t:"";0==n.length?n=i(`<div id="J_singleton_toast" class="text-toast ${r}"></div>`).appendTo("body"):n[0].className=`text-toast ${r}`,n.html(e).removeClass("text-toast-on").css({marginLeft:0}),setTimeout(function(){n.css({marginLeft:Math.round((i(window).width()-(n.outerWidth?n.outerWidth():n.width()))/2)+"px"}).addClass("text-toast-on")},0)}}},,,function(e,t){e.exports=require("tinify")},function(e,t,n){"use strict";n.r(t),n.d(t,"filterFiles",function(){return a}),n.d(t,"dealFiles",function(){return u});var i=n(2),r=n(1),o=n(7);o.key="ECdkodKFYOkbRrA2kQMnGejXYO6ZAGn9";const s=n(4);function a(e){var t=[];if(e.length>20)return s.open("单次上传请勿超过20张图！"),null;for(let n=0;n<e.length;n++){let i=e[n];if(-1===i.type.indexOf("image"))return s.open("目前仅支持图片格式！"),null;if(i.size>5242880)return s.open("单张图不得超过5M！"),null;t.push({size:i.size,name:i.name,path:i.path,type:i.type})}return t}async function u(e){var t=0,n=0;for(let c=0;c<e.length;c++){let p=e[c];t+=p.size;var s=p.path,a=r.dirname(s),u=r.basename(s),d=r.join(a,"sourcet",u);l(r.join(a,"sourcet")),i.writeFileSync(d,i.readFileSync(s));let f=await o.fromFile(s);await f.toFile(s);n+=i.statSync(s).size}return{count:e.length,initSize:t,resultSize:n}}function l(e){try{i.mkdirSync(e)}catch(e){if("EEXIST"!=e.code)throw e}}},function(e,t,n){const{ipcRenderer:i}=n(3),r=n(0);Toast=n(4);const{filterFiles:o,dealFiles:s}=n(8);var a="resolve";function u(){r(".J_tiny_step").removeClass("dealling"),r(".J_tiny_tips").text("Drop your .png or .jpg files here!"),r(".J_tiny_subtips").text("Up to 20 images, max 5 MB each.").removeClass("red")}function l(){r(".J_tiny_step").addClass("dealling"),r(".J_tiny_tips").text("松开鼠标开始处理"),r(".J_tiny_subtips").addClass("red").text("Up to 20 images, max 5 MB each.")}r(document).on({dragleave:function(e){e.preventDefault()},drop:function(e){e.preventDefault()},dragenter:function(e){e.preventDefault()},dragover:function(e){e.preventDefault()}}),r("#J_tiny_box").on({dragenter:function(e){"pending"!=a&&l()},dragleave:function(e){"pending"!=a&&u()},dragover:function(){"pending"!=a&&l()},drop:async function(e){if("pending"==a)return void Toast.open("处理中，请稍后重试");a="pending",r(".J_tiny_step").addClass("dealling"),r(".J_tiny_tips").text("处理中"),r(".J_tiny_subtips").addClass("red").text("Up to 20 images, max 5 MB each.");let t=e.originalEvent.dataTransfer.files,n=o(t);if(n&&n.length>0){let e=await s(n);a="resolve",function(e){let t=e.initSize-e.resultSize;r(".J_tiny_step").addClass("dealling"),r(".J_tiny_tips").text(`已处理${e.count}个文件`),r(".J_tiny_subtips").removeClass("red").text(`压缩空间${(t/1024).toFixed(2)}kb；压缩占比${Math.round(100*(t/e.initSize).toFixed(2))}%`)}(e),i.send("notice-mini-done",e)}else a="resolve",u()}})}]);